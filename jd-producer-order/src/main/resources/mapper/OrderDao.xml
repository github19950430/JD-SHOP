<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.jdproducerorder.dao.OrderDao">

    <resultMap type="com.example.jdproducerorder.entity.order.Order" id="OrderMap">
        <result property="orderId" column="order_id" jdbcType="INTEGER"/>
        <result property="orderNo" column="order_no" jdbcType="VARCHAR"/>
        <result property="orderStatus" column="order_status" jdbcType="INTEGER"/>
        <result property="storeId" column="store_id" jdbcType="INTEGER"/>
        <result property="storeName" column="store_name" jdbcType="VARCHAR"/>
        <result property="productAmountTotal" column="product_amount_total" jdbcType="NUMERIC"/>
        <result property="orderAmountTotal" column="order_amount_total" jdbcType="NUMERIC"/>
        <result property="couponMoney" column="coupon_money" jdbcType="NUMERIC"/>
        <result property="logisticsFee" column="logistics_fee" jdbcType="NUMERIC"/>
        <result property="address" column="address" jdbcType="VARCHAR"/>
        <result property="orderlogisticsNo" column="orderlogistics_no" jdbcType="INTEGER"/>
        <result property="payChannel" column="pay_channel" jdbcType="INTEGER"/>
        <result property="outTradeNo" column="out_trade_no" jdbcType="INTEGER"/>
        <result property="createTime" column="create_time" jdbcType="TIMESTAMP"/>
        <result property="payTime" column="pay_time" jdbcType="TIMESTAMP"/>
        <result property="userId" column="user_id" jdbcType="INTEGER"/>
        <result property="orderSettlementStatus" column="order_settlement_status" jdbcType="INTEGER"/>
        <!--<result property="orderSettlementTime" column="order_settlement_time" jdbcType="TIMESTAMP"/>-->
    </resultMap>

    <!--查询单个-->
    <select id="queryById" resultMap="OrderMap">
        select
          order_id, order_no, order_status, store_id, product_amount_total, order_amount_total, coupon_money, logistics_fee, address, orderlogistics_no, pay_channel, out_trade_no, create_time, pay_time, user_id, order_settlement_status,store_name
        from JD_SHOP_ORDER.order
        where order_id = #{orderId}
    </select>

    <!--查询单个-->
    <select id="queryByNo" resultMap="OrderMap">
        select
          order_id, order_no, order_status, store_id, product_amount_total, order_amount_total, coupon_money, logistics_fee, address, orderlogistics_no, pay_channel, out_trade_no, create_time, pay_time, user_id, order_settlement_status,store_name
        from JD_SHOP_ORDER.order
        where order_no = #{orderNo}
    </select>

    <!--查询指定行数据-->
    <select id="queryAllByLimit" resultMap="OrderMap">
        select
          order_id, order_no, order_status, store_id, product_amount_total, order_amount_total,coupon_money, logistics_fee, address, orderlogistics_no, pay_channel, out_trade_no, create_time, pay_time, user_id, order_settlement_status,store_name
        from JD_SHOP_ORDER.order
        limit #{offset}, #{limit}
    </select>

    <!--通过实体作为筛选条件查询-->
    <select id="queryAll" resultMap="OrderMap">
        select
          order_id, order_no, order_status, store_id, product_amount_total, order_amount_total,coupon_money, logistics_fee, address, orderlogistics_no, pay_channel, out_trade_no, create_time, pay_time, user_id, order_settlement_status,store_name
        from JD_SHOP_ORDER.order
        <where>
            <if test="orderId != null">
                and order_id = #{orderId}
            </if>
            <if test="orderNo != null and orderNo != ''">
                and order_no = #{orderNo}
            </if>
            <if test="orderStatus != null">
                and order_status = #{orderStatus}
            </if>
            <if test="storeId != null">
                and store_id = #{storeId}
            </if>
            <if test="storeName != null">
                and store_name = #{storeName}
            </if>
            <if test="productAmountTotal != null">
                and product_amount_total = #{productAmountTotal}
            </if>
            <if test="orderAmountTotal != null">
                and order_amount_total = #{orderAmountTotal}
            </if>
            <if test="couponMoney != null">
                and coupon_money = #{couponMoney}
            </if>
            <if test="logisticsFee != null">
                and logistics_fee = #{logisticsFee}
            </if>
            <if test="address != null">
                and address = #{address}
            </if>
            <if test="orderlogisticsNo != null">
                and orderlogistics_no = #{orderlogisticsNo}
            </if>
            <if test="payChannel != null">
                and pay_channel = #{payChannel}
            </if>
            <if test="outTradeNo != null">
                and out_trade_no = #{outTradeNo}
            </if>
            <if test="createTime != null">
                and create_time = #{createTime}
            </if>
            <if test="payTime != null">
                and pay_time = #{payTime}
            </if>
            <if test="userId != null">
                and user_id = #{userId}
            </if>
            <if test="orderSettlementStatus != null">
                and order_settlement_status = #{orderSettlementStatus}
            </if>
            <!--<if test="orderSettlementTime != null">-->
                <!--and order_settlement_time = #{orderSettlementTime}-->
            <!--</if>-->
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="orderId" useGeneratedKeys="true">
        insert into JD_SHOP_ORDER.order(order_no, order_status, store_id, store_name, product_amount_total, order_amount_total, coupon_money, logistics_fee, address, orderlogistics_no, pay_channel, out_trade_no, create_time, pay_time, user_id, order_settlement_status)
        values (#{orderNo}, #{orderStatus}, #{storeId}, #{storeName}, #{productAmountTotal}, #{orderAmountTotal}, #{couponMoney}, #{logisticsFee}, #{address}, #{orderlogisticsNo}, #{payChannel}, #{outTradeNo}, #{createTime}, #{payTime}, #{userId}, #{orderSettlementStatus})
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update JD_SHOP_ORDER.order
        <set>
            <if test="orderNo != null and orderNo != ''">
                order_no = #{orderNo},
            </if>
            <if test="orderStatus != null">
                order_status = #{orderStatus},
            </if>
            <if test="storeId != null">
                store_id = #{storeId},
            </if>
            <if test="storeName != null">
                store_name = #{storeName},
            </if>
            <if test="productAmountTotal != null">
                product_amount_total = #{productAmountTotal},
            </if>
            <if test="orderAmountTotal != null">
                order_amount_total = #{orderAmountTotal},
            </if>
            <if test="couponMoney != null">
                coupon_money = #{couponMoney},
            </if>
            <if test="logisticsFee != null">
                logistics_fee = #{logisticsFee},
            </if>
            <if test="address != null">
                address = #{address},
            </if>
            <if test="orderlogisticsNo != null">
                orderlogistics_no = #{orderlogisticsNo},
            </if>
            <if test="payChannel != null">
                pay_channel = #{payChannel},
            </if>
            <if test="outTradeNo != null">
                out_trade_no = #{outTradeNo},
            </if>
            <if test="createTime != null">
                create_time = #{createTime},
            </if>
            <if test="payTime != null">
                pay_time = #{payTime},
            </if>
            <if test="userId != null">
                user_id = #{userId},
            </if>
            <if test="orderSettlementStatus != null">
                order_settlement_status = #{orderSettlementStatus},
            </if>
            <!--<if test="orderSettlementTime != null">-->
                <!--order_settlement_time = #{orderSettlementTime},-->
            <!--</if>-->
        </set>
        where order_id = #{orderId}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete from JD_SHOP_ORDER.order where order_id = #{orderId}
    </delete>

</mapper>